# 배치란?

- 일정 시간 동안 대량의 데이터를 한 번에 처리하는 방식
- 대량의 데이터를 복잡한 쿼리를 걸어 DB간 이동 시키는 도중 프로그램이 부하되거나 오류로 멈춰 버리면 처음부터 다시 시작할 수 없기 때문에 작업 지점을 기록 해야 한다.
- 중간 지점을 기록해두고 다시 시작할 수 있다는 장점이 있다.

# 메타 테이블
- 데이터 처리에 대한 정보를 담을 메타 테이블
- Batch에서 제공하는 샘플이 있다.
- 테이블 -> 테이블 , 엑셀 -> 테이블 , 테이블 -> 엑셀 , 웹API -> 테이블 배치 등의 작업이 가능하다.

# 동작 방식

1. 읽어오기
2. 처리하기
3. 쓰기

위 작업을 반복해서 수행한다.

## 한 번에 처리하지 않고 반복하는 이유

한 번에 많은 데이터를 읽게 되면 메모리의 용량을 초과할 수도 있으며, 실패 했을때 위험성이 매우 치명적이다.
성능 이슈도 발생하기 때문에 대량의 데이터를 슬라이딩하여 반복잡업을 수행한다.


# 배치를 활요하는 방법
1. 은행 이자 시스템 : 매일 자정 전일 데이터를 기반으로 이자 및 기타 업무를 수행
2. 주기별 회원 상태 확인
3. 급여
4. 보고서
5. 데이터 삭제

# 스프링 배치의 아키텍처

<img src="./image/Batch%20Architecture.jpg" alt="Batch Architecture">

- Job Launcher : 배치 작업을 실행 시키는 시작점
- Job : "읽기 -> 처리 -> 쓰기" 과정을 정의한 작업
- Step : 실제 하나의 "읽기 -> 처리 -> 쓰기" 작업을 정의한 부분, 1개의 Job에서 1:N의 구조를 가진다.
- Item Reader : 아이템을 읽는 부분
- Item Processor : 아이템을 처리하는 부분
- Item Writer : 아이템 쓰기를 수행하는 부분